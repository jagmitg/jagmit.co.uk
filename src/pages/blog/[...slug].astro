---
import BlogLayout from '@layouts/BlogLayout.astro'
import { getSortedPosts } from '@utils/collections'
import type { FlexibleBlogPost } from '@utils/collections'
import { readingTime } from '@utils/readingTime'

export async function getStaticPaths() {
	const blogEntries = await getSortedPosts()

	const paths = blogEntries.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry }
	}))

	return paths
}

const { entry } = Astro.props as {
	entry: FlexibleBlogPost
}


const { Content } = await entry.render()
const content = await entry.render().then(result => result.toString())
const headings = []
---

<BlogLayout
  headings={headings}
  frontmatter={entry.data}
  readingTime={readingTime(content)}
>
  <Content />
</BlogLayout>
