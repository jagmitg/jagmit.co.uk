---
import BlogLayout from "@layouts/BlogLayout.astro";
import { getSortedPosts } from "@utils/collections";
import { readingTime } from "@utils/readingTime";
import type { CollectionEntry } from "astro:content";

export async function getStaticPaths() {
  const blogEntries = await getSortedPosts();

  const paths = blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));

  return paths;
}


const { entry } = Astro.props as {
  entry: CollectionEntry<"blog">;
};

const { Content } = await entry.render();
const headings = [];
---

<BlogLayout headings={headings} frontmatter={entry.data}>
  {readingTime(entry.body)}

  <Content />
</BlogLayout>
